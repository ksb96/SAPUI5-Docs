/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.ca.scfld.md.controller.BaseFullscreenController");jQuery.sap.require("hcm.emp.myleaverequests.utils.Formatters");sap.ca.scfld.md.controller.BaseFullscreenController.extend("hcm.emp.myleaverequests.view.S2",{extHookChangeFooterButtons:null,extHookTimeAccountCollection:null,onInit:function(){sap.ca.scfld.md.controller.BaseFullscreenController.prototype.onInit.call(this);this.resourceBundle=this.oApplicationFacade.getResourceBundle();this.oDataModel=this.oApplicationFacade.getODataModel();this.entitlementTableCntrl=this.byId("entitlemntTble");this.templateCntrl=this.byId("LRS2_LISTITEM");this.oRouter.attachRouteMatched(this._handleRouteMatched,this);hcm.emp.myleaverequests.utils.DataManager.init(this.oDataModel,this.resourceBundle);hcm.emp.myleaverequests.utils.Formatters.init(this.resourceBundle)},_handleRouteMatched:function(e){if(e.getParameter("name")==="entitlements"){sap.ca.ui.utils.busydialog.requireBusyDialog();var _=this;hcm.emp.myleaverequests.utils.DataManager.getTimeAccountCollection(function(r){sap.ca.ui.utils.busydialog.releaseBusyDialog();if(this.extHookTimeAccountCollection){r=this.extHookTimeAccountCollection(r)}_.entitlementTableCntrl.setModel(new sap.ui.model.json.JSONModel(r));_.entitlementTableCntrl.bindItems("/TimeAccountCollection",_.templateCntrl)},function(o){sap.ca.ui.utils.busydialog.releaseBusyDialog();hcm.emp.myleaverequests.utils.UIHelper.errorDialog(hcm.emp.myleaverequests.utils.DataManager.parseErrorMessages(o))})}},getHeaderFooterOptions:function(){var o={sI18NFullscreenTitle:"LR_TITLE_BALANCE_VIEW",onBack:jQuery.proxy(function(){var d=sap.ui.core.routing.History.getInstance().getDirection(this.oRouter.getURL("home"));if(d==="Backwards"){window.history.go(-1)}else{this.oRouter.navTo("home")}},this)};var m=new sap.ui.core.routing.HashChanger();var u=m.getHash();if(u.indexOf("Shell-runStandaloneApp")>=0){o.bSuppressBookmarkButton=true}if(this.extHookChangeFooterButtons){o=this.extHookChangeFooterButtons(o)}return o}});
