/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("hcm.mgr.approve.leaverequests.util.Conversions");jQuery.sap.require("sap.ca.ui.model.format.DateFormat");jQuery.sap.require("hcm.mgr.approve.leaverequests.util.NumberFormatter");jQuery.sap.require("hcm.mgr.approve.leaverequests.Configuration");hcm.mgr.approve.leaverequests.util.Conversions=(function(){"use strict";return{formatterAbsenceDuration:function(A,a,b){var o,c,d;if(!A||!a||b===null){return""}o=A;c=a;if(b){d=hcm.mgr.approve.leaverequests.util.NumberFormatter.formatNumberStripZeros(o)}else{d=hcm.mgr.approve.leaverequests.util.NumberFormatter.formatNumberStripZeros(c)}return d},formatterAbsenceDurationUnit:function(A,a,b){var o,c,d,B=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(!A||!a||b===null){return""}o=A;c=a;if(b){if(o==1){d=B.getText("util.Conversions.Day_Singular")}else{d=B.getText("util.Conversions.Days")}}else{if(c==1){d=B.getText("util.Conversions.Hour_Singular")}else{d=B.getText("util.Conversions.Hours")}}return d},formatterAbsenceDurationAndUnit:function(A,a,b){var o,c,d,B=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(!A||!a||b===null){return""}o=A;c=a;if(b){o=hcm.mgr.approve.leaverequests.util.NumberFormatter.formatNumberStripZeros(o);if(o==1){d=B.getText("util.Conversions.Value_Day_Singular",[o])}else{d=B.getText("util.Conversions.Value_Days",[o])}}else{c=hcm.mgr.approve.leaverequests.util.NumberFormatter.formatNumberStripZeros(c);if(c==1){d=B.getText("util.Conversions.Value_Hour_Singular",[c])}else{d=B.getText("util.Conversions.Value_Hours",[c])}}return d},formatterListCancelStatus:function(l){var r="",b=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(l=="3"){r=b.getText("view.List.CancellationStatus")}return r},formatterHeaderCancelStatus:function(){var r="";if(arguments.length>0){var b=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(arguments[0]=="3"){return b.getText("view.Header.CancellationStatus")}}return r},formatterCurrentBalanceVisible:function(c){var r=true;if(!c){r=false}if(c=="000"){r=false}return r},formatterCurrentBalance:function(C,a){var c=0,o=0,r=0,b=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(!C||!a){return""}c=C;o=a;c=hcm.mgr.approve.leaverequests.util.NumberFormatter.formatNumberStripZeros(c);if(o=="010"){if(c==1){r=b.getText("util.Conversions.Value_Day_Singular",[c])}else{r=b.getText("util.Conversions.Value_Days",[c])}}if(o=="001"){if(c==1){r=b.getText("util.Conversions.Value_Hour_Singular",[c])}else{r=b.getText("util.Conversions.Value_Hours",[c])}}return r},formatterEmployeeID:function(e){if(!e){return""}return hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle().getText("view.Header.EmployeeID",[e])},formatterOverlapsVisible:function(o){var r=true;if(!o){r=false}if(o==0){r=false}return r},formatterOverlaps:function(o){var r="",b=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(o==1){r=b.getText("util.Conversions.OverlapSing",[o])}else if(o>1){r=b.getText("util.Conversions.OverlapsPl",[o])}return r},formatterOverlapLink:function(o){var r="",b=hcm.mgr.approve.leaverequests.Configuration.oApplicationFacade.getResourceBundle();if(o==1){r=b.getText("util.Conversions.OverlapSingLink",[o])}else if(o>1){r=b.getText("util.Conversions.OverlapsPlLink")}return r},formatterTimestampToDate:function(t){var d,D;d=sap.ca.ui.model.format.DateFormat.getInstance({style:"short"});if(!t){return""}if(typeof t==="string"){if(t.indexOf("Date")>=0){D=hcm.mgr.approve.leaverequests.util.Conversions.convertDateStringToDate(t)}else{D=hcm.mgr.approve.leaverequests.util.Conversions.convertTimestampToDate(t)}}else{D=new Date(t)}D=new Date(D.getUTCFullYear(),D.getUTCMonth(),D.getUTCDate());return d.formatDaysAgo(D)},formatterAbsenceDays3:function(S,a,E,b,A){var t,s,e,o,c,d;d=sap.ca.ui.model.format.DateFormat.getInstance({style:"full"});if(!S||!a||!E||!b||A===null){return""}s=d.format(S,true);e=d.format(E,true);o=hcm.mgr.approve.leaverequests.util.Conversions.formatterTime(a);c=hcm.mgr.approve.leaverequests.util.Conversions.formatterTime(b);if(s===e){if(!A){if(o===c){t=""}else{t="   "+o+" - "+c}}else{t=""}t=s+t}else{t=s+" - "+e}return t},formatterAbsenceDays3Short:function(S,P,E,a,A){var t,s,e,o,b,d;d=sap.ca.ui.model.format.DateFormat.getInstance({style:"short"});if(!S||!P||!E||!a){return""}s=d.format(S,true);e=d.format(E,true);o=hcm.mgr.approve.leaverequests.util.Conversions.formatterTime(P);b=hcm.mgr.approve.leaverequests.util.Conversions.formatterTime(a);if(s===e){if(!A){if(o===b){t=""}else{t="   "+o+" - "+b}}else{t=""}t=s+t}else{t=s+" - "+e}return t},formatterDate1:function(d){var f=sap.ca.ui.model.format.DateFormat.getDateInstance({pattern:"MMddYYYY"}),c=new Date(d);if(c){return f.format(c)}return""},formatterDate2:function(d){var f=sap.ca.ui.model.format.DateFormat.getDateInstance({pattern:"YYYY-MM-ddThh:mm"}),c=new Date(d);if(c){return f.format(c)}return""},formatterTime:function(t){var d=new Date(),H=t.ms/(3600*1000),a=Math.floor(H),M=t.ms-(a*3600*1000),b=Math.floor(M/(60*1000)),S=0,c=0,T=sap.ca.ui.model.format.DateFormat.getTimeInstance({style:"short"}).format(d,true),e=T.split(":"),A="",l=e[e.length-1],f="";d.setHours(a,b,S,c);if(d){if(isNaN(l)){f=l.split(" ");e[e.length-1]=f[0];A=" "+f[1]}return(e[0]+":"+e[1]+A)}},formatterPT_Time:function(p){if(p.substring(0,2)!=="PT"||p.substring(4,5)!=="H"||p.substring(7,8)!=="M"||p.substring(10,11)!=="S"){return""}var h=p.substring(2,4)*60*60*1000,m=p.substring(5,7)*60*1000,s=p.substring(8,10)*1000,r=h+m+s,d=new Date(),T=d.getTimezoneOffset()*60*1000,t=sap.ca.ui.model.format.DateFormat.getTimeInstance({style:"short"}).format(d,true),a=t.split(":"),A="",l=a[a.length-1],b="";d.setTime(r+T);if(d){if(isNaN(l)){b=l.split(" ");a[a.length-1]=b[0];A=" "+b[1]}return(a[0]+":"+a[1]+A)}},convertDateStringToDate:function(d){var s=d.indexOf("("),e=d.indexOf(")"),D=d.substring(s+1,e),o=new Date();o.setTime(D);return o},convertTimestampToDate:function(t){var d=new Date(),D=null,T=new sap.ui.model.type.Date({source:{pattern:"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"},pattern:"yyyy,MM,dd",style:"medium"});d=T.formatValue(t,"string");D=new Date(d);return D},convertUTCToLocalDate:function(d){var u=new Date();u.setUTCDate(d.getDate());u.setUTCFullYear(d.getFullYear());u.setUTCHours(d.getHours());u.setUTCMonth(d.getMonth());u.setUTCMinutes(d.getMinutes());u.setUTCSeconds(d.getSeconds());u.setUTCMilliseconds(d.getMilliseconds());return u},convertLocalDateToUTC:function(v){var d=null,D=sap.ca.ui.model.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-dd'T'HH:mm:ss"});if(v instanceof Date){d=hcm.mgr.approve.leaverequests.util.Conversions.revertTimezoneOffset(v)}else if(typeof v==="string"){d=D.parse(v)}return d},revertTimezoneOffset:function(v){var d,U,m,t,r;if(v instanceof Date){d=v;m=d.getTime();t=d.getTimezoneOffset()*60*1000;m=m+t;U=new Date(m);r=U}else{r=v}return r},formatterNotesVisible:function(c){var v=false;if(c){v=true}return v},formatErrorDialog:function(e){var m="";var a="";if(e.response){m=e.response.statusText;var b=e.response.body;var i=b.indexOf("value");var c=b.substring(i).indexOf("}");if(c>-1){m=b.substring(i+8,i+c-1)}var d=b.indexOf("errordetails");var f=b.substring(d).indexOf("message");var g=b.substring(d+f).indexOf(",");if(g>-1){a=b.substring(d+f+10,d+f+g-1)}}var M={message:m,details:a,type:sap.ca.ui.message.Type.ERROR};sap.ca.ui.message.showMessageBox({type:M.type,message:M.message,details:M.details})}}}());
